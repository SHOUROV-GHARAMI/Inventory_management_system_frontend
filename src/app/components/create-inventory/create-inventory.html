<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card">
        <div class="card-header">
          <h2 class="mb-0">
            @if (editMode) {
              <i class="fas fa-edit"></i> Edit Inventory
            } @else {
              <i class="fas fa-plus"></i> Create New Inventory
            }
          </h2>
        </div>
        <div class="card-body">
          @if (loading && editMode) {
            <div class="text-center py-5">
              <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          } @else {
            @if (error) {
              <div class="alert alert-danger alert-dismissible fade show" role="alert">
                {{ error }}
                <button type="button" class="btn-close" (click)="error = ''"></button>
              </div>
            }

            <form (ngSubmit)="onSubmit()" #inventoryForm="ngForm">
              <!-- Title -->
              <div class="mb-3">
                <label for="title" class="form-label">
                  Title <span class="text-danger">*</span>
                </label>
                <input
                  type="text"
                  class="form-control"
                  id="title"
                  name="title"
                  [(ngModel)]="inventory.title"
                  required
                  maxlength="100"
                  placeholder="Enter inventory title"
                  [disabled]="loading"
                >
                <div class="form-text">Choose a descriptive title for your inventory</div>
              </div>

              <!-- Category -->
              <div class="mb-3">
                <label for="category" class="form-label">
                  Category <span class="text-danger">*</span>
                </label>
                <select
                  class="form-select"
                  id="category"
                  name="category"
                  [(ngModel)]="inventory.category"
                  required
                  [disabled]="loading"
                >
                  <option value="">Select a category</option>
                  @for (cat of categories; track cat) {
                    <option [value]="cat">{{ cat }}</option>
                  }
                </select>
              </div>

              <!-- Description -->
              <div class="mb-3">
                <label for="description" class="form-label">
                  Description <span class="text-danger">*</span>
                </label>
                <textarea
                  class="form-control"
                  id="description"
                  name="description"
                  [(ngModel)]="inventory.description"
                  required
                  rows="6"
                  placeholder="Describe your inventory (Markdown supported)"
                  [disabled]="loading"
                ></textarea>
                <div class="form-text">
                  You can use Markdown formatting (e.g., **bold**, *italic*, # headings)
                </div>
              </div>

              <!-- Tags -->
              <div class="mb-3">
                <label for="tags" class="form-label">Tags</label>
                <input
                  type="text"
                  class="form-control"
                  id="tags"
                  name="tags"
                  [(ngModel)]="inventory.tags"
                  placeholder="tag1, tag2, tag3"
                  [disabled]="loading"
                >
                <div class="form-text">Comma-separated tags to help categorize your inventory</div>
              </div>

              <!-- Visibility -->
              <div class="mb-4">
                <label class="form-label">Visibility</label>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="visibility"
                    id="publicRadio"
                    [value]="true"
                    [(ngModel)]="inventory.isPublic"
                    [disabled]="loading"
                  >
                  <label class="form-check-label" for="publicRadio">
                    <i class="fas fa-globe text-primary"></i> Public
                    <small class="text-muted d-block">Anyone can view this inventory</small>
                  </label>
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="visibility"
                    id="privateRadio"
                    [value]="false"
                    [(ngModel)]="inventory.isPublic"
                    [disabled]="loading"
                  >
                  <label class="form-check-label" for="privateRadio">
                    <i class="fas fa-lock text-warning"></i> Private
                    <small class="text-muted d-block">Only you and users you share with can view</small>
                  </label>
                </div>
              </div>

              <!-- Image URL (optional) -->
              <div class="mb-4">
                <label for="imageUrl" class="form-label">Image URL (Optional)</label>
                <input
                  type="url"
                  class="form-control"
                  id="imageUrl"
                  name="imageUrl"
                  [(ngModel)]="inventory.imageUrl"
                  placeholder="https://example.com/image.jpg"
                  [disabled]="loading"
                >
                <div class="form-text">Note: Image upload feature coming soon</div>
              </div>

              <!-- Action Buttons -->
              <div class="d-flex gap-2">
                <button
                  type="submit"
                  class="btn btn-primary"
                  [disabled]="loading || !inventoryForm.valid"
                >
                  @if (loading) {
                    <span class="spinner-border spinner-border-sm me-2"></span>
                  }
                  @if (editMode) {
                    <i class="fas fa-save"></i> Update Inventory
                  } @else {
                    <i class="fas fa-plus"></i> Create Inventory
                  }
                </button>
                <button
                  type="button"
                  class="btn btn-secondary"
                  (click)="cancel()"
                  [disabled]="loading"
                >
                  <i class="fas fa-times"></i> Cancel
                </button>
              </div>
            </form>
          }
        </div>
      </div>
    </div>
  </div>
</div>
